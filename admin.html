<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hotel Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}

body{
    background:#f4f6f8;
}

/* DASHBOARD */

.sidebar{
    width:220px;
    height:100vh;
    background:#0f2027;
    color:white;
    position:fixed;
    padding:20px;
}

.sidebar h2{
    margin-bottom:30px;
}

.sidebar a{
    display:block;
    color:white;
    text-decoration:none;
    margin-bottom:15px;
    transition:0.3s;
}

.sidebar a:hover{
    color:#f9c74f;
}

.main{
    margin-left:240px;
    padding:30px;
}

.card{
    background:white;
    padding:25px;
    border-radius:10px;
    box-shadow:0 8px 20px rgba(0,0,0,0.1);
    margin-bottom:30px;
}

.card h3{
    margin-bottom:20px;
}

input, select{
    width:100%;
    padding:10px;
    margin-bottom:12px;
    border-radius:5px;
    border:1px solid #ccc;
}

button.action{
    padding:10px 18px;
    background:#f9c74f;
    border:none;
    font-weight:bold;
    cursor:pointer;
    border-radius:5px;
}

table{
    width:100%;
    border-collapse:collapse;
}

table th, table td{
    padding:10px;
    border-bottom:1px solid #ddd;
    text-align:left;
}

.status{
    font-weight:bold;
}

.approved{
    color:green;
}

.pending{
    color:orange;
}

.delete{
    background:#e63946;
    color:white;
    border:none;
    padding:6px 10px;
    border-radius:4px;
    cursor:pointer;
}

.approve{
    background:#2a9d8f;
    color:white;
    border:none;
    padding:6px 10px;
    border-radius:4px;
    cursor:pointer;
}

.approve:hover{background:#21867a;}
.delete:hover{background:#c92a3a;}
</style>
</head>

<body>

<!-- DASHBOARD -->
<div class="dashboard">

    <div class="sidebar">
        <h2>Admin Panel</h2>
        <a href="#rooms">Manage Rooms</a>
        <a href="#bookings">Booking Requests</a>
        <a href="#" onclick="logout()">Logout</a>
    </div>

    <div class="main">

        <!-- ROOM MANAGEMENT -->
        <div class="card" id="rooms">
            <h3>Add / Update Rooms</h3>
            <input type="text" id="roomName" placeholder="Room Name">
            <input type="text" id="roomPrice" placeholder="Price per Night">
            <select id="roomType">
                <option>Deluxe</option>
                <option>Executive</option>
                <option>Luxury</option>
            </select>
            <button class="action" onclick="addRoom()">Add Room</button>

            <table style="margin-top:20px;">
                <thead>
                    <tr>
                        <th>Room</th>
                        <th>Type</th>
                        <th>Price</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="roomTable"></tbody>
            </table>
        </div>

        <!-- BOOKINGS -->
        <div class="card" id="bookings">
            <h3>Booking Requests</h3>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Room</th>
                        <th>Check-in</th>
                        <th>Check-out</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="bookingTable"></tbody>
            </table>
        </div>

    </div>
</div>

<script>
/* üîí PROTECT ADMIN PAGE */
if (sessionStorage.getItem("isAdminLoggedIn") !== "true") {
    window.location.href = "index.html";
}

function logout(){
    sessionStorage.removeItem("isAdminLoggedIn");
    window.location.href = "index.html";
}

/* üè† ROOM MANAGEMENT */
function addRoom(){
    let name = document.getElementById("roomName").value;
    let price = document.getElementById("roomPrice").value;
    let type = document.getElementById("roomType").value;

    if(name === "" || price === "") return;

    let row = `
        <tr>
            <td>${name}</td>
            <td>${type}</td>
            <td>$${price}</td>
            <td><button class="delete" onclick="removeRow(this)">Delete</button></td>
        </tr>`;
    document.getElementById("roomTable").innerHTML += row;

    document.getElementById("roomName").value = "";
    document.getElementById("roomPrice").value = "";
}

function removeRow(btn){
    btn.closest("tr").remove();
}

/* üì¶ LOAD BOOKINGS FROM LOCAL STORAGE */
function loadBookings(){
    const bookingTable = document.getElementById("bookingTable");
    bookingTable.innerHTML = "";

    const bookings = JSON.parse(localStorage.getItem("bookings")) || [];

    if(bookings.length === 0){
        bookingTable.innerHTML = `<tr><td colspan="7">No booking requests yet.</td></tr>`;
        return;
    }

    bookings.forEach((b) => {
        const row = document.createElement("tr");
        row.innerHTML = `
            <td>${b.name}</td>
            <td>${b.email}</td>
            <td>${b.room}</td>
            <td>${b.checkin}</td>
            <td>${b.checkout}</td>
            <td class="status ${b.status.toLowerCase()}">${b.status}</td>
            <td>
                <button class="approve" onclick="approveBooking(${b.id})">Approve</button>
                <button class="delete" onclick="deleteBooking(${b.id})">Delete</button>
            </td>
        `;
        bookingTable.appendChild(row);
    });
}

/* ‚úÖ APPROVE BOOKING REQUEST */
function approveBooking(id){
    let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
    bookings = bookings.map(b => b.id === id ? {...b, status: "Approved"} : b);
    localStorage.setItem("bookings", JSON.stringify(bookings));
    alert("‚úÖ Booking approved and confirmation email sent to guest!");
    loadBookings();
}

/* ‚ùå DELETE BOOKING REQUEST */
function deleteBooking(id){
    let bookings = JSON.parse(localStorage.getItem("bookings")) || [];
    bookings = bookings.filter(b => b.id !== id);
    localStorage.setItem("bookings", JSON.stringify(bookings));
    alert("üóëÔ∏è Booking request deleted.");
    loadBookings();
}

/* üîÑ INITIAL LOAD */
loadBookings();
</script>

</body>
</html>
